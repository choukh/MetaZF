# Coqé›†åˆæ¨¡å‹è®º(1-4): é›†åˆé—´çš„ç›¸ä¼¼å…³ç³»

> Qç¾¤ï¼š893531731  
> [GitHub - choukh/MetaZF](https://github.com/choukh/MetaZF)  
> [æ€»ç›®å½•](https://zhuanlan.zhihu.com/p/524446016)

## å‰ç½®çŸ¥è¯†
- [Coq SFç¬¬1å·](https://coq-zh.github.io/SF-zh/lf-current/toc.html)
- [Coqé›†åˆæ¨¡å‹è®º(2-3): HFçš„èŒƒç•´æ€§](https://zhuanlan.zhihu.com/p/526565639)  

ä½ æ²¡çœ‹é”™, æœ¬è®²çš„å‰ç½®æ˜¯2-3. è¿™é‡Œè®¾ä¸ºå‰ç½®æ˜¯å› ä¸ºè¯æ˜æ€è·¯ç±»ä¼¼, è€Œä¸æ˜¯å®šç†é—´æœ‰ç›´æ¥ä¾èµ–å…³ç³». ç”±äºç¬¬2ç« è®²çš„HFç»“æ„ç›¸å¯¹æœ¬ç« çš„ZFç»“æ„ç®€å•å¾ˆå¤š, å¦‚æœä½ æƒ³å¿«é€Ÿäº†è§£ 1-4 ~ 1-6 çš„åŠ¨æœºå’Œè¯æ˜è·¯çº¿, é‚£ä¹ˆå¼ºçƒˆå»ºè®®ä½ å…ˆè¯»ä¸€é2-3.

## ç›¸ä¼¼å…³ç³»
ç»™å®šZFçš„ä¸¤ä¸ªæ¨¡å‹Må’ŒN, æˆ‘ä»¬çº¦å®šåœ¨ä¸‹æ–‡ä¸­x y zæŒ‡ä»£Mçš„é›†åˆ, a b cæŒ‡ä»£Nçš„é›†åˆ, Ræ˜¯Mçš„é›†åˆä¸Nçš„é›†åˆä¹‹é—´çš„å…³ç³».
```Coq
Context {M N : ZF}.
Implicit Type x y : M.
Implicit Type a b : N.
Implicit Type R : M â†’ N â†’ Prop.
```

**å®šä¹‰1-4-1 (Ïµå®Œå…¨)**  
æˆ‘ä»¬è¯´Rå¯¹xä¸aæ˜¯Ïµå·¦å®Œå…¨çš„, å½“ä¸”ä»…å½“å¯¹ä»»æ„y âˆˆ x, å­˜åœ¨b âˆˆ aæ»¡è¶³yRb.  
æˆ‘ä»¬è¯´Rå¯¹xä¸aæ˜¯Ïµå³å®Œå…¨çš„, å½“ä¸”ä»…å½“å¯¹ä»»æ„b âˆˆ a, å­˜åœ¨y âˆˆ xæ»¡è¶³yRb.  


```Coq
Local Definition Ïµå·¦å®Œå…¨ R x a := âˆ€ y âˆˆ x, âˆƒ b âˆˆ a, R y b.
Local Definition Ïµå³å®Œå…¨ R x a := âˆ€ b âˆˆ a, âˆƒ y âˆˆ x, R y b.
```

**å®šä¹‰1-4-2 (ç›¸ä¼¼)** æˆ‘ä»¬è¯´xå’Œaç›¸ä¼¼, è®°ä½œx â‰ˆ a, å¦‚æœâ‰ˆå¯¹xä¸aæ˜¯Ïµå·¦å®Œå…¨ä¸”Ïµå³å®Œå…¨çš„. (æ³¨æ„è¿™é‡Œæ˜¯å½’çº³å®šä¹‰)  
```Coq
Inductive ç›¸ä¼¼ x a : Prop := 
  | bis_intro : Ïµå·¦å®Œå…¨ ç›¸ä¼¼ x a â†’ Ïµå³å®Œå…¨ ç›¸ä¼¼ x a â†’ ç›¸ä¼¼ x a.
Notation "x â‰ˆ a" := (ç›¸ä¼¼ x a) (at level 80) : zf_scope.
```

**å®šä¹‰1-4-3 (ÏµåµŒå…¥)**  
æˆ‘ä»¬è¯´xèƒ½ÏµåµŒå…¥åˆ°a, è®°ä½œx â–· a, å½“ä¸”ä»…å½“â‰ˆå¯¹xä¸aæ˜¯Ïµå·¦å®Œå…¨.  
æˆ‘ä»¬è¯´xè¢«a ÏµåµŒå…¥, è®°ä½œx â— a, å½“ä¸”ä»…å½“â‰ˆå¯¹xä¸aæ˜¯Ïµå³å®Œå…¨.  

```Coq
Notation "x â–· a" := (Ïµå·¦å®Œå…¨ ç›¸ä¼¼ x a) (at level 80) : zf_scope.
Notation "x â— a" := (Ïµå³å®Œå…¨ ç›¸ä¼¼ x a) (at level 80) : zf_scope.
```

**å¼•ç†1-4-4** x â‰ˆ a è•´å« x â–· a ä¸” x â— a.  
ä¾å®šä¹‰ âˆ

```Coq
Lemma å·¦åµŒå…¥ x a : x â‰ˆ a â†’ x â–· a.
Proof. now intros []. Qed.

Lemma å³åµŒå…¥ x a : x â‰ˆ a â†’ x â— a.
Proof. now intros []. Qed.
```

**å¼•ç†1-4-5 (å¯¹ç§°æ€§)** x â‰ˆ a è•´å« a â‰ˆ x.  
ç”¨Ïµå½’çº³, æˆ‘ä»¬åªè¯a â–· x, å¦ä¸€è¾¹æ˜¯å¯¹ç§°çš„. ç”±x â‰ˆ a, æœ‰x â–· a, å³å­˜åœ¨y âˆˆ xæ»¡è¶³y â‰ˆ b. è¦è¯a â–· x, å³è¯å¯¹b âˆˆ a, å­˜åœ¨z âˆˆ xä¸”b â‰ˆ z. å…¶å®yå°±æ˜¯è¿™æ ·çš„z, å› ä¸ºç”±Ïµå½’çº³å‡è®¾, å¯¹ä»»æ„y âˆˆ x, åªè¦æœ‰y â‰ˆ b, å°±æœ‰b â‰ˆ y âˆ

```Coq
Lemma ç›¸ä¼¼çš„å¯¹ç§°æ€§ x a : x â‰ˆ a â†’ a â‰ˆ x.
Proof.
  pose proof (æ­£åˆ™ x) as WF. revert a.
  induction WF as [x _ IH].
  intros a [l r]. split.
  - intros b ba. destruct (r b ba) as [y [yx yb]].
    exists y. split; auto.
  - intros y yx. destruct (l y yx) as [b [ba yb]].
    exists b. split; auto.
Qed.
```

**å¼•ç†1-4-6 (å¯¹ç§°æ€§)** x â–· a ç­‰ä»·äº a â— x.  
æˆ‘ä»¬åªè¯ä¸€è¾¹. ç”±x â–· a, å­˜åœ¨b âˆˆ aæ»¡è¶³y â‰ˆ b. è¦è¯å¯¹ä»»æ„y âˆˆ x, å­˜åœ¨c âˆˆ aæ»¡è¶³c â‰ˆ y. ç”±ç›¸ä¼¼çš„å¯¹ç§°æ€§, bå°±æ˜¯è¿™æ ·çš„c âˆ

```Coq
Lemma åµŒå…¥çš„å¯¹ç§°æ€§ x a : x â–· a â†” a â— x.
Proof.
  split.
  - intros l y yx. destruct (l y yx) as [b [ba yb]].
    exists b. split; auto. now apply ç›¸ä¼¼çš„å¯¹ç§°æ€§.
  - intros r y yx. destruct (r y yx) as [b [ba yb]].
    exists b. split; auto. now apply ç›¸ä¼¼çš„å¯¹ç§°æ€§.
Qed.
```


**å¼•ç†1-4-7 (å‡½æ•°æ€§)** x â‰ˆ y â†’ x â‰ˆ y' â†’ y = y'.  


```Coq
Lemma ç›¸ä¼¼çš„å‡½æ•°æ€§ : å‡½æ•°æ€§ (@ç›¸ä¼¼ ğ“œ ğ“).
Proof.
  intros x. induction (æ­£åˆ™ x) as [x _ IH].
  intros a b [xa ax] [xb bx].
  apply å¤–å»¶; intros c C.
  - destruct (ax c C) as [y [yx yc]].
    destruct (xb y yx) as [d [db yd]].
    rewrite (IH y yx c d); auto.
  - destruct (bx c C) as [y [yx yc]].
    destruct (xa y yx) as [d [db yd]].
    rewrite (IH y yx c d); auto.
Qed.
```

## ä¿æŒç»“æ„


